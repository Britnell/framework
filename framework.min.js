var Framework=function(e){"use strict";const t={},n={},o={},i={"x-text":(t,n,o)=>{e.effect(()=>{t.textContent=d(n,o)})},"x-show":(t,n,o)=>{e.effect(()=>{const e=d(n,o);t.style.display=e?"":"none";const i=t.nextElementSibling;i?.hasAttribute("x-else")&&(i.style.display=e?"none":"")})},"x-model":(t,n,o)=>{const i=t,r=function(e,t){const n=t.split(".");let o=e;for(const e of n)o=o[e];return o}(o,n);a(r)?(setTimeout(()=>{m(i,r.value)},0),e.effect(()=>{m(i,r.value)}),i.addEventListener("input",()=>{r.value=function(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:"radio"===e.type?e.checked?e.value:null:"number"===e.type?""===e.value?null:Number(e.value):e.value:e.value}(i)})):console.error(`[x-model] Expression "${n}" does not resolve to a signal. x-model requires a signal.`)},"x-form":function(e,t,o){if(!(e instanceof HTMLFormElement))return void console.error("x-form directive can only be used on form elements.");const i=e,r=t,s=n[r];if(!s)return void console.error(`Form validation schema not found: "${r}"`);i.addEventListener("input",e=>{u(e.target,s)}),i.addEventListener("submit",e=>{const t=function(e,t){const n=new FormData(e);let o=!0;return n.forEach((e,t)=>{e.toString()}),e.querySelectorAll("input, textarea, select").forEach(e=>{const n=e;u(n,t),n.checkValidity()||(o=!1)}),o}(i,s);if(t){if(s.onSubmit){const t=new FormData(i),n={};t.forEach((e,t)=>{n[t]=e.toString()}),s.onSubmit(e,n)}}else e.preventDefault()})},"x-if":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-if directive must be used on a <template> element.");const i=document.createElement("div");i.style.display="contents",t.parentNode.insertBefore(i,t);const s=[];s.push({template:t,expression:n});let c=t.nextElementSibling;for(;c;){if(!(c instanceof HTMLTemplateElement&&c.hasAttribute("x-else-if"))){if(c instanceof HTMLTemplateElement&&c.hasAttribute("x-else")){s.push({template:c,expression:null});break}break}s.push({template:c,expression:c.getAttribute("x-else-if")}),c=c.nextElementSibling}let a=null;e.effect(()=>{let e=null;for(const{template:t,expression:n}of s)if(null===n||d(n,o)){e=t;break}if(e!==a){if(i.innerHTML="",e){const t=e.content.cloneNode(!0),n=Array.from(t.children);for(const e of n)e instanceof Element&&r(e,o);i.append(t)}a=e}})},"x-for":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-for directive must be used on a <template> element.");const i=t,c=i.parentNode,[l,u,f]=function(e){const t=e.match(/^\((\w+),\s*(\w+)\)\s+in\s+(.+)$/);if(t)return[t[1],t[2],t[3].trim()];const n=e.match(/^(\w+)\s+in\s+(.+)$/);if(!n)throw new Error(`Invalid x-for expression: "${e}"`);return[n[1],null,n[2].trim()]}(n),m=document.createComment(` x-for: ${n} `);c.insertBefore(m,i),e.effect(()=>{const e=d(f,o),t=a(e)?e.value:e;for(;m.nextSibling&&m.nextSibling!==i;)c.removeChild(m.nextSibling);if(Array.isArray(t))for(let e=0;e<t.length;e++){const n=t[e],a=h(o,l,u,n,e),f=i.content.cloneNode(!0);for(const e of Array.from(f.childNodes))e instanceof Element?r(e,a):e instanceof Text&&s(e,a);c.insertBefore(f,i)}})},"x-load":(e,t,n)=>{e.style.display="block"},"x-temp":(e,t,n)=>{const o=t,i=document.getElementById(o);if(!i)return void console.error(`Template with id "${o}" not found.`);const r=document.createDocumentFragment();for(;e.firstChild;)r.appendChild(e.firstChild);const s=i.content.cloneNode(!0),c=s.querySelector("slot");c&&c.replaceWith(r),e.appendChild(s)}};function r(e=document.body,n={}){!function(e,t={},n){function o(e,t){if(e instanceof Element){const i=["SCRIPT","STYLE"].includes(e.tagName),r="TEMPLATE"===e.tagName&&e.id;if(i||r)return;const s=n(e,t),c=Array.from(e.childNodes);for(const e of c)o(e,s)}else e instanceof Text&&n(e,t)}o(e,t)}(e,{...o,...window.pageprops,...n},(e,n)=>{let o={...n};if(e instanceof Element){o=function(e,n){const o=e.getAttribute("x-comp");if(!o)return n;let i={};if(o.includes("{"))try{i=l(d(o,{}))}catch(e){return console.error(`Failed to evaluate x-comp "${o}" as inline object`,e),n}else{const n=o.split(",").map(e=>e.trim());for(const r of n)if(t[r]){const n=b(e),o=t[r]({emit:n,el:e});i={...i,...o}}else console.warn(`Component "${r}" not found in x-comp "${o}"`)}return e._data=i,{...n,...e._data}}(e,o);const n=function(e,n){if(!e.tagName.includes("-"))return n;const o=e.tagName.toLowerCase();if(!t[o]||e._data)return n;const i=function(e,t){const n=e.getAttribute("x-props");if(!n)return{};try{return d(n,t)}catch(e){return console.error("Error parsing props:",e),{}}}(e,n),r=b(e);return e._data=t[o]({el:e,emit:r},i),{...n,...e._data}}(e,o);n!==o&&(o=n)}return s(e,o),o})}function s(t,n){if(t instanceof Text)return void function(t,n){const o=t.textContent;if(!o?.trim()||!o.includes("{"))return;const i=o.split(/(\{[\s\S]*?\})/g);e.effect(()=>{t.textContent=i.map(e=>{if(e.startsWith("{")&&e.endsWith("}")){const t=e.slice(1,-1);try{const o=d(t,n);return null==o?e:String(o)}catch(t){return e}}return e}).join("")})}(t,n);Object.keys(i).forEach(e=>{if(t.hasAttribute(e)){const o=t.getAttribute(e);(o||"x-load"===e)&&i[e](t,o||"",n)}});Array.from(t.attributes).filter(e=>e.name.startsWith("@")||e.name.startsWith(":")).forEach(o=>{const i=o.value;if(i)if(o.name.startsWith("@")){const e=o.name.substring(1);!function(e,t,n,o){const{event:i,modifiers:r}=function(e){const t=e.split(".");return{event:t[0],modifiers:t.slice(1)}}(t),s=e=>e?._data?b(e):e.parentElement?s(e.parentElement):null,a=s(e),l=t=>{for(const n of r){const o=c[n];if(o){if(!0===o(e,t))return}}const i={...o,$event:t,emit:a};d(n,i)},u=r.includes("once")?{once:!0}:{};e.addEventListener(i,l,u)}(t,e,i,n)}else if(o.name.startsWith(":")){const r=o.name.substring(1);!function(t,n,o,i){e.effect(()=>{const e=d(o,i);if("class"===n){if("string"==typeof e)t.className=e;else if(Array.isArray(e))t.className=e.join(" ");else if("object"==typeof e){const n=Object.entries(e).filter(([e,t])=>t).map(([e])=>e).join(" ");t.className=n}}else"style"===n?"string"==typeof e?t.style.cssText=e:"object"==typeof e&&Object.entries(e).forEach(([e,n])=>{t.style.setProperty(e,String(n))}):!1===e||null==e?t.removeAttribute(n):t.setAttribute(n,String(e))})}(t,r,i,n)}})}const c={prevent:(e,t)=>{t.preventDefault()},stop:(e,t)=>{t.stopPropagation()},outside:(e,t)=>!t.target||(!!e.contains(t.target)||void 0),self:(e,t)=>{if(t.target!==e)return!0}};function a(e){return!(!e||"object"!=typeof e||"function"!=typeof e.peek)}function l(t){if("object"!=typeof t||null===t||a(t))return t;const n={};return Object.keys(t).forEach(o=>{const i=t[o];a(i)?n[o]=i:"function"==typeof i?n[o]=i.bind(n):"object"!=typeof i||null===i||Array.isArray(i)?n[o]=e.signal(i):n[o]=l(i)}),n}function u(e,t){const n=e.name;if(!n)return;const{fields:o}=t;if(!o||!o[n]){e.setCustomValidity("");const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);e&&(e.textContent="")}return}const i=o[n].safeParse(e.value),r=e.getAttribute("aria-describedby");let s=null;if(r&&(s=document.getElementById(r)),i.success)e.setCustomValidity("");else{const t=i.error.issues[0]?.message||"Invalid value";e.setCustomValidity(t)}s&&(s.textContent=e.validationMessage)}const f={comp:function(e,n){t[e]=n||((e,t)=>t);const o=document.getElementById(e);e.includes("-")&&o&&function(e,t){class n extends p{constructor(){super(t)}}customElements.define(e,n)}(e,o)},render:async function(e,n){document.dispatchEvent(new CustomEvent("way:init")),await async function(e){const t=e.filter(e=>e.includes("-"));if(t.length>0){const e=t.map(e=>customElements.whenDefined(e).catch(()=>null));await Promise.all(e)}}(Object.keys(t)),r(e,n)},form:function(e,t,o){n[e]={fields:t,onSubmit:o}},signal:e.signal,effect:e.effect,computed:e.computed,store:function(e,t){o[e]=t()}};function d(e,t){try{return new Function("data",`with(data) { return (${e}) }`)(t)}catch{return null}}function m(e,t){if(e instanceof HTMLInputElement){if("checkbox"===e.type)return void(e.checked=Boolean(t));if("radio"===e.type)return void(e.checked=e.value===String(t))}e.value=String(t??"")}"undefined"!=typeof window&&(window.way=f);class p extends HTMLElement{constructor(e){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e}connectedCallback(){const e=document.createDocumentFragment();for(;this.firstChild;)e.appendChild(this.firstChild);const t=this.template.content.cloneNode(!0),n=t.querySelector("slot");n&&n.replaceWith(e),this.appendChild(t),this._data?.onMounted&&this._data.onMounted()}disconnectedCallback(){this._data?.onUnmounted&&this._data.onUnmounted()}}function h(e,t,n,o,i){const r={...e,[t]:o,$index:i};return n&&(r[n]=i,r.index=i),r}function b(e){return(t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}}return f}(signalsCore);
