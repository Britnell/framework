<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite + TS</title>
  <script type="module" src="/src/main.ts"></script>
</head>

<body>
  <style>
    [x-load] {
      display: none;
    }
  </style>
  <script>window.pageprops = { tommy: 123 }</script>
  <div id="app" x-load>
    <h1>Counter Example</h1>

    <h2>A</h2>
    <div x-data="counter">
      <p :style="{'--x': count.value}">
        count:<span x-text="count"></span>
        x 2 = <span x-text="double"></span>
      </p>
      <button @click="increment()">+</button>
      <button @click="decrement()">-</button>
      <p x-show="count%2==0">even</p>
      <p x-else>uneven</p>
      <ul :style="{'font-size': `${24-count.value*0.5}px`}">
        <template x-for="(i,j) in Array(count.value).fill(0)">
          <li x-text="j+1" key="j">
          </li>
        </template>
      </ul>
    </div>

    <h2>B</h2>
    <div x-data="counter">
      <p>
        count:<span x-text="count" :class="count%2?'a':'b'"></span>
        x 2 = <span x-text="double"></span>
      </p>
      <button @click="increment()">+</button>
      <button @click="decrement()">-</button>

      <template x-if="count.value%3==0">
        x<p x-text="double"></p>
        x<p x-text="double"></p>
      </template>
      <template x-else>
        <p>____</p>
      </template>
      <div class=" my-10 " x-data="{open: true}">
        <button x-show="!open.value" @click="open.value=!open.value">open</button>
        <my-counter x-else x-props="{x: count, title: 'cool' }" @close="open.value=false">
        </my-counter>
      </div>
    </div>


    <div>
      <my-clock>
      </my-clock>
    </div>

  </div>

  <template id="my-clock">
    <select x-model="theme.color">
      <option value="red">red</option>
      <option value="green">green</option>
    </select>
    <div class="x" :style="{ color: theme.color.value }">
      color: <span x-text="theme.color.value"></span>
      <h3>clock</h3>
      <p x-text="time"></p>
    </div>
  </template>
  <script>
    document.addEventListener('framework:init', () => {
      Framework.component('my-clock', () => {
        const time = Framework.signal(new Date())
        return {
          time
        }
      })
    })
  </script>


  <template id="my-counter">
    <div>
      <h3 x-text="title"></h3>
      <p>
        x= <span x-text="x"></span>
      </p>
      <button @click="incr()">++</button>
      <button @click="close()">close</button>

      <p>
        B= <span x-text="count"></span>
      </p>

      <form x-form="userForm">
        <div>
          <p>val =
            <span x-text="uppercase"></span>
          </p>
          <div>

            <input name="password" x-model="val" aria-describedby="pwerror" />
            <p id="pwerror"></p>
          </div>
          <button>submit</button>
        </div>
      </form>
    </div>
  </template>

</body>

</html>