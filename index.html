<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vite + TS</title>
  <script type="module" src="/src/main.ts"></script>
</head>

<body>
  <style>
    [x-load] {
      display: none;
    }
  </style>

  <script>window.pageprops = { tommy: 123 }</script>

  <h1>A Web-framework</h1>

  <h2>1. this is just alpine with signals</h2>

  <div x-data="{x:1}">
    <p>The count {x},
      <span x-show="x.value%2===0">is even</span>
      <span x-else>is odd</span>
    </p>
    <p>
      {x} x 2 = {x.value*2}
    </p>
    <button @click="x.value = x.value+1">+1</button>
  </div>

  <div id="app" x-load>
    <h1>Counter Example</h1>

    <h2>A</h2>
    <div x-data="counter">
      <p :style="{'--x': count}">
        count: {count}
        x 2 = {double}
      </p>
      <button @click="increment()">+</button>
      <button @click="decrement()">-</button>
      <p x-show="count%2==0">even</p>
      <p x-else>uneven</p>
      <p>
        IF:
        <template x-if="count%2==0">even</template>
        <template x-else>uneven</template>
      </p>

      <ul :style="{'font-size': `${24-count*0.5}px`}">
        <template x-for="(i,j) in Array(count.value).fill(0)">
          <li key="j">
            {j+1}
          </li>
        </template>
      </ul>
    </div>

    <h2>B</h2>
    <!-- <div x-data="counter">
      <p>
        count:<span :class="count%2?'a':'b'">{count}</span>
        x 2 = {double}
      </p>
      <button @click="increment()">+</button>
      <button @click="decrement()">-</button>

      <template x-if="count%3==0">
        <p>
          //{double}\\
        </p>
      </template>
      <template x-else>
        <p>____</p>
      </template>
      <div class=" my-10 " x-data="{open: true}">
        <button x-show="!open" @click="open=!open">open</button>
        <my-counter x-else x-props="{x: count, title: 'cool' }" @close="open=false">
          <p>This is some slotted content for the my-counter component.</p>
        </my-counter>
      </div>
    </div> -->


    <div>
      <my-clock>
      </my-clock>
    </div>

  </div>

  <template id="my-clock">
    <select x-model="theme.color">
      <option value="red">red</option>
      <option value="green">green</option>
    </select>
    <div class="x" :style="{ color: theme.color }">
      color: {theme.color}
      <h3>clock</h3>
      <p>{time}</p>
    </div>
  </template>
  <script>
    document.addEventListener('way:init', () => {
      way.comp('my-clock', () => {
        const time = way.signal(new Date())
        return {
          time
        }
      })
    })
  </script>


  <template id="my-counter">
    <div>
      <h3>{title}</h3>
      <p>
        x= {x}
      </p>
      <button @click="incr()">++</button>
      <button @click="close()">close</button>

      <p>
        B= {count}
      </p>

      <form x-form="userForm">
        <div>
          <p>val = {uppercase}
          </p>
          <div>

            <input name="password" x-model="val" aria-describedby="pwerror" />
            <p id="pwerror"></p>
          </div>
          <button>submit</button>
        </div>
      </form>
      <slot></slot>
    </div>
  </template>

  <template id="card">
    <div style="border: 1px solid #ccc; padding: 16px; margin: 16px 0;">
      <h3>Card</h3>
      <slot></slot>
    </div>
  </template>

  <div x-temp="card">
    <p>This is the content that will be slotted into the card.</p>
  </div>

</body>

</html>