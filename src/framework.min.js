var Framework=function(e){"use strict";const t={},n={},o={},r={"x-text":(t,n,o)=>{e.effect(()=>{t.textContent=d(n,o)})},"x-show":(t,n,o)=>{e.effect(()=>{const e=d(n,o);t.style.display=e?"":"none";const r=t.nextElementSibling;r?.hasAttribute("x-else")&&(r.style.display=e?"none":"")})},"x-model":(t,n,o)=>{const r=t,i=function(e,t){const n=t.split(".");let o=e;for(const e of n)o=o[e];return o}(o,n);a(i)?(setTimeout(()=>{m(r,i.value)},0),e.effect(()=>{m(r,i.value)}),r.addEventListener("input",()=>{i.value=function(e){return e instanceof HTMLInputElement?"checkbox"===e.type?e.checked:"radio"===e.type?e.checked?e.value:null:"number"===e.type?""===e.value?null:Number(e.value):e.value:e.value}(r)})):console.error(`[x-model] Expression "${n}" does not resolve to a signal. x-model requires a signal.`)},"x-form":function(e,t,o){if(!(e instanceof HTMLFormElement))return void console.error("x-form directive can only be used on form elements.");const r=e,i=t,s=n[i];if(!s)return void console.error(`Form validation schema not found: "${i}"`);r.addEventListener("input",e=>{u(e.target,s)}),r.addEventListener("submit",e=>{const t=function(e,t){const n=new FormData(e);let o=!0;return n.forEach((e,t)=>{e.toString()}),e.querySelectorAll("input, textarea, select").forEach(e=>{const n=e;u(n,t),n.checkValidity()||(o=!1)}),o}(r,s);if(t){if(s.onSubmit){const t=new FormData(r),n={};t.forEach((e,t)=>{n[t]=e.toString()}),s.onSubmit(e,n)}}else e.preventDefault()})},"x-if":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-if directive must be used on a <template> element.");const r=document.createElement("div");r.style.display="contents",t.parentNode.insertBefore(r,t);const s=[];s.push({template:t,expression:n});let c=t.nextElementSibling;for(;c;){if(!(c instanceof HTMLTemplateElement&&c.hasAttribute("x-else-if"))){if(c instanceof HTMLTemplateElement&&c.hasAttribute("x-else")){s.push({template:c,expression:null});break}break}s.push({template:c,expression:c.getAttribute("x-else-if")}),c=c.nextElementSibling}let a=null;e.effect(()=>{let e=null;for(const{template:t,expression:n}of s)if(null===n||d(n,o)){e=t;break}if(e!==a){if(r.innerHTML="",e){const t=e.content.cloneNode(!0),n=Array.from(t.children);for(const e of n)e instanceof Element&&i(e,o);r.append(t)}a=e}})},"x-for":function(t,n,o){if(!(t instanceof HTMLTemplateElement))return void console.error("x-for directive must be used on a <template> element.");const r=t,c=r.parentNode,[l,u,f]=function(e){const t=e.match(/^\((\w+),\s*(\w+)\)\s+in\s+(.+)$/);if(t)return[t[1],t[2],t[3].trim()];const n=e.match(/^(\w+)\s+in\s+(.+)$/);if(!n)throw new Error(`Invalid x-for expression: "${e}"`);return[n[1],null,n[2].trim()]}(n),m=document.createComment(` x-for: ${n} `);c.insertBefore(m,r),e.effect(()=>{const e=d(f,o),t=a(e)?e.value:e;for(;m.nextSibling&&m.nextSibling!==r;)c.removeChild(m.nextSibling);if(Array.isArray(t))for(let e=0;e<t.length;e++){const n=t[e],a=h(o,l,u,n,e),f=r.content.cloneNode(!0);for(const e of Array.from(f.childNodes))e instanceof Element?i(e,a):e instanceof Text&&s(e,a);c.insertBefore(f,r)}})},"x-load":(e,t,n)=>{e.style.display="block"},"x-temp":(e,t,n)=>{const o=t,r=document.getElementById(o);if(!r)return void console.error(`Template with id "${o}" not found.`);const i=document.createDocumentFragment();for(;e.firstChild;)i.appendChild(e.firstChild);const s=r.content.cloneNode(!0),c=s.querySelector("slot");c&&c.replaceWith(i),e.appendChild(s)}};function i(e=document.body,n={}){!function(e,t={},n){function o(e,t){if(e instanceof Element){const r=["SCRIPT","STYLE"].includes(e.tagName),i="TEMPLATE"===e.tagName&&e.id;if(r||i)return;const s=n(e,t),c=Array.from(e.childNodes);for(const e of c)o(e,s)}else e instanceof Text&&n(e,t)}o(e,t)}(e,{...o,...n},(e,n)=>{let o={...n};if(e instanceof Element){o=function(e,n){const o=e.getAttribute("x-data");if(!o)return n;let r={};if(o.includes("{"))try{r=l(d(o,{}))}catch(e){return console.error(`Failed to evaluate x-data "${o}" as inline object`,e),n}else{const n=o.split(",").map(e=>e.trim());for(const i of n)if(t[i]){const n=b(e),o=t[i]({emit:n,el:e});r={...r,...o}}else console.warn(`Component "${i}" not found in x-data "${o}"`)}return e._data=r,{...n,...e._data}}(e,o);const n=function(e,n){if(!e.tagName.includes("-"))return n;const o=e.tagName.toLowerCase();if(!t[o]||e._data)return n;const r=function(e,t){const n=e.getAttribute("x-props");if(!n)return{};try{return d(n,t)}catch(e){return console.error("Error parsing props:",e),{}}}(e,n),i=b(e);return e._data=t[o]({el:e,emit:i},r),{...n,...e._data}}(e,o);n!==o&&(o=n)}return s(e,o),o})}function s(t,n){if(t instanceof Text)return void function(t,n){const o=t.textContent;if(!o?.trim()||!o.includes("{"))return;const r=o.split(/(\{[\s\S]*?\})/g);e.effect(()=>{t.textContent=r.map(e=>{if(e.startsWith("{")&&e.endsWith("}")){const t=e.slice(1,-1);try{const o=d(t,n);return null==o?e:String(o)}catch(t){return e}}return e}).join("")})}(t,n);Object.keys(r).forEach(e=>{if(t.hasAttribute(e)){const o=t.getAttribute(e);(o||"x-load"===e)&&r[e](t,o||"",n)}});Array.from(t.attributes).filter(e=>e.name.startsWith("@")||e.name.startsWith(":")).forEach(o=>{const r=o.value;if(r)if(o.name.startsWith("@")){const e=o.name.substring(1);!function(e,t,n,o){const{event:r,modifiers:i}=function(e){const t=e.split(".");return{event:t[0],modifiers:t.slice(1)}}(t),s=e=>e?._data?b(e):e.parentElement?s(e.parentElement):null,a=s(e),l=t=>{for(const n of i){const o=c[n];if(o){if(!0===o(e,t))return}}const r={...o,$event:t,emit:a};d(n,r)},u=i.includes("once")?{once:!0}:{};e.addEventListener(r,l,u)}(t,e,r,n)}else if(o.name.startsWith(":")){const i=o.name.substring(1);!function(t,n,o,r){e.effect(()=>{const e=d(o,r);if("class"===n){if("string"==typeof e)t.className=e;else if(Array.isArray(e))t.className=e.join(" ");else if("object"==typeof e){const n=Object.entries(e).filter(([e,t])=>t).map(([e])=>e).join(" ");t.className=n}}else"style"===n?"string"==typeof e?t.style.cssText=e:"object"==typeof e&&Object.entries(e).forEach(([e,n])=>{t.style.setProperty(e,String(n))}):!1===e||null==e?t.removeAttribute(n):t.setAttribute(n,String(e))})}(t,i,r,n)}})}const c={prevent:(e,t)=>{t.preventDefault()},stop:(e,t)=>{t.stopPropagation()},outside:(e,t)=>!t.target||(!!e.contains(t.target)||void 0),self:(e,t)=>{if(t.target!==e)return!0}};function a(e){return!(!e||"object"!=typeof e||"function"!=typeof e.peek)}function l(t){if("object"!=typeof t||null===t||a(t))return t;const n={};return Object.keys(t).forEach(o=>{const r=t[o];a(r)?n[o]=r:"function"==typeof r?n[o]=r.bind(n):"object"!=typeof r||null===r||Array.isArray(r)?n[o]=e.signal(r):n[o]=l(r)}),n}function u(e,t){const n=e.name;if(!n)return;const{fields:o}=t;if(!o||!o[n]){e.setCustomValidity("");const t=e.getAttribute("aria-describedby");if(t){const e=document.getElementById(t);e&&(e.textContent="")}return}const r=o[n].safeParse(e.value),i=e.getAttribute("aria-describedby");let s=null;if(i&&(s=document.getElementById(i)),r.success)e.setCustomValidity("");else{const t=r.error.issues[0]?.message||"Invalid value";e.setCustomValidity(t)}s&&(s.textContent=e.validationMessage)}const f={comp:function(e,n){t[e]=n||((e,t)=>t);const o=document.getElementById(e);e.includes("-")&&o&&function(e,t){class n extends p{constructor(){super(t)}}customElements.define(e,n)}(e,o)},render:async function(e,n){document.dispatchEvent(new CustomEvent("way:init")),await async function(e){const t=e.filter(e=>e.includes("-"));if(t.length>0){const e=t.map(e=>customElements.whenDefined(e).catch(()=>null));await Promise.all(e)}}(Object.keys(t)),i(e,n)},form:function(e,t,o){n[e]={fields:t,onSubmit:o}},signal:e.signal,effect:e.effect,computed:e.computed,store:function(e,t){o[e]=t()}};function d(e,t){try{return new Function("data",`with(data) { return (${e}) }`)(t)}catch(t){return console.error(`Error evaluating expression: "${e}"`,t),null}}function m(e,t){if(e instanceof HTMLInputElement){if("checkbox"===e.type)return void(e.checked=Boolean(t));if("radio"===e.type)return void(e.checked=e.value===String(t))}e.value=String(t??"")}"undefined"!=typeof window&&(window.way=f);class p extends HTMLElement{constructor(e){super(),Object.defineProperty(this,"template",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_data",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.template=e}connectedCallback(){const e=document.createDocumentFragment();for(;this.firstChild;)e.appendChild(this.firstChild);const t=this.template.content.cloneNode(!0),n=t.querySelector("slot");n&&n.replaceWith(e),this.appendChild(t),this._data?.onMounted&&this._data.onMounted()}disconnectedCallback(){this._data?.onUnmounted&&this._data.onUnmounted()}}function h(e,t,n,o,r){const i={...e,[t]:o,$index:r};return n&&(i[n]=r,i.index=r),i}function b(e){return(t,n)=>{e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0}))}}return f}(signalsCore);
